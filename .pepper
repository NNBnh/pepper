config indent_with_tabs false
lsp-start "rust-analyzer"

map-normal <space>b ": build<enter>"
map-normal <space>t ": test<enter>"

on-platforms windows {={
    alias build {{enqueue-keys ":o build.log scratch<enter>aad|cmd /c cargo build 2<greater>&1<enter>"}}
    alias test {{enqueue-keys ":o test.log scratch<enter>aad|cmd /c cargo test --workspace 2<greater>&1<enter>"}}
}=}

on-platforms linux {={
    alias build {{enqueue-keys ":o build.log scratch<enter>aad|sh -c 'cargo build 2<greater>&1'<enter>"}}
    alias test {{enqueue-keys ":o test.log scratch<enter>aad|sh -c 'cargo test --workspace 2<greater>&1'<enter>"}}
}=}
